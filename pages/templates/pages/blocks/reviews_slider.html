{% load wagtailcore_tags %}

<section class="section reviews-bleed">
  <div class="reviews-surface py-14">
    <div class="container-shell">
      {% if value.heading %}
        <h2 class="section-title mb-8">
          {{ value.heading }}
        </h2>
      {% endif %}

      {% if value.reviews %}
        <div class="relative">
          <div
            class="flex gap-6 overflow-x-auto scroll-smooth snap-x snap-mandatory pb-2"
            data-carousel-track
          >
            {% for review in value.reviews %}
              {% if review.link %}
                <a
                  href="{{ review.link }}"
                  target="_blank"
                  rel="noopener"
                  class="testimonial-card min-w-[280px] md:min-w-[360px] snap-start no-underline hover:border-accent transition"
                >
              {% else %}
                <div class="testimonial-card min-w-[280px] md:min-w-[360px] snap-start">
              {% endif %}

                  <blockquote class="text-lg leading-relaxed text-fg/85">
                    {{ review.quote }}
                  </blockquote>

                  <div class="mt-5 text-sm text-muted">
                    <span class="font-medium text-heading">
                      {{ review.author }}
                    </span>
                    {% if review.source %}
                      <span class="mx-1">·</span>{{ review.source }}
                    {% endif %}
                  </div>

                  {% if review.link %}
                    <div class="mt-4 text-xs uppercase tracking-wide text-accent-2">
                      Read on Google →
                    </div>
                  {% endif %}

              {% if review.link %}
                </a>
              {% else %}
                </div>
              {% endif %}
            {% endfor %}
          </div>
        </div>
      {% endif %}
    </div>
  </div>
</section>
