{% extends "base.html" %}
{% load wagtailcore_tags wagtailimages_tags %}

{% block content %}
  <section class="section">
    <div class="container-shell">
      <header class="max-w-prose">
        <h1 class="text-3xl md:text-5xl leading-[1.05]">{{ page.title }}</h1>
        {% if page.intro %}
          <div class="mt-5 prose max-w-none">
            {{ page.intro|richtext }}
          </div>
        {% endif %}
      </header>

      {% with posts=page.get_posts %}
        {% if posts %}
          <div class="mt-10 grid gap-4 md:grid-cols-2 lg:grid-cols-3">
            {% for post in posts %}
              <a href="{{ post.url }}" class="card group block p-6 md:p-7 hover:translate-y-[-1px] transition will-change-transform">
                {% if post.featured_image %}
                  {% image post.featured_image fill-900x560 as img %}
                  <img class="mb-5 w-full rounded-2xl border border-border/30 object-cover" src="{{ img.url }}" alt="{{ img.alt|default:post.title }}" />
                {% endif %}

                <div class="text-xs tracking-wide uppercase text-muted">
                  {{ post.date|date:"j M Y" }}
                </div>

                <h2 class="mt-2 text-xl md:text-2xl leading-tight text-heading">
                  {{ post.title }}
                </h2>

                {% if post.excerpt %}
                  <p class="mt-3 text-muted">
                    {{ post.excerpt }}
                  </p>
                {% endif %}

                <div class="mt-6">
                  <span class="btn btn-secondary">Read</span>
                </div>
              </a>
            {% endfor %}
          </div>
        {% else %}
          <div class="mt-10 card p-8 md:p-10">
            <p class="text-muted">No posts yet. Add your first entry in Wagtail.</p>
          </div>
        {% endif %}
      {% endwith %}
    </div>
  </section>
{% endblock %}
