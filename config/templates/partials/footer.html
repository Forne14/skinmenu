{% load wagtailcore_tags %}

{% with gs=settings.site_settings.GlobalSiteSettings nav=settings.site_settings.NavigationSettings %}
<footer class="border-t border-border/20 bg-surface pt-10 md:pt-12 pb-8">
  <div class="container-shell">

    {# Top grid (tighter) #}
    <div class="grid gap-10 lg:grid-cols-12 mb-10 md:mb-12">

      {# Brand / address / socials / map #}
      <div class="lg:col-span-5 space-y-6">
        <div>
          <h3 class="text-2xl font-display text-heading tracking-wide mb-3">
            {{ gs.clinic_name|default:"SKINMENU" }}
          </h3>

          {% if gs.address %}
            <div class="text-fg/60 whitespace-pre-line leading-relaxed">
              {{ gs.address }}
            </div>
          {% endif %}
        </div>

        <div class="flex gap-6 pt-1">
          {% if gs.instagram_url %}
            <a href="{{ gs.instagram_url }}" class="text-fg/50 hover:text-skinmenu-brown transition no-underline" target="_blank" rel="noopener">IG</a>
          {% endif %}
          {% if gs.tiktok_url %}
            <a href="{{ gs.tiktok_url }}" class="text-fg/50 hover:text-skinmenu-brown transition no-underline" target="_blank" rel="noopener">TT</a>
          {% endif %}
          {% if gs.facebook_url %}
            <a href="{{ gs.facebook_url }}" class="text-fg/50 hover:text-skinmenu-brown transition no-underline" target="_blank" rel="noopener">FB</a>
          {% endif %}
        </div>

        {% if gs.google_maps_embed_url %}
          <div class="pt-2">
            <div class="rounded-2xl overflow-hidden border border-border/20 bg-bg">
              <iframe
                title="Google Maps"
                src="{{ gs.google_maps_embed_url }}"
                class="w-full aspect-[4/3]"
                loading="lazy"
                referrerpolicy="no-referrer-when-downgrade"
                allowfullscreen
              ></iframe>
            </div>

            {% if gs.google_maps_url %}
              <div class="pt-2">
                <a href="{{ gs.google_maps_url }}" class="text-fg/50 hover:text-skinmenu-brown transition no-underline" target="_blank" rel="noopener">
                  Open in Google Maps â†’
                </a>
              </div>
            {% endif %}
          </div>
        {% endif %}
      </div>

      {# Footer links #}
      <div class="lg:col-span-3">
        <div class="label-display text-skinmenu-brown mb-4">
          Links
        </div>

        <nav class="flex flex-col gap-2 text-fg/70">
          {% for b in nav.footer_links %}
            {% with link=b.value %}
              {% if link.page %}
                <a class="hover:text-skinmenu-brown transition-colors no-underline" href="{% pageurl link.page %}">{{ link.label }}</a>
              {% else %}
                <a class="hover:text-skinmenu-brown transition-colors no-underline" href="{{ link.url }}"
                  {% if link.open_in_new_tab %}target="_blank" rel="noopener"{% endif %}
                >{{ link.label }}</a>
              {% endif %}
            {% endwith %}
          {% endfor %}
        </nav>
      </div>

      {# Newsletter ONLY (removed Enquire block) #}
      <div class="lg:col-span-4">
        <div class="label-display text-skinmenu-brown mb-4">
          {{ gs.newsletter_heading|default:"Stay in the know" }}
        </div>

        <form
          {% if gs.newsletter_form_action %}
            action="{{ gs.newsletter_form_action }}"
            method="post"
            target="_blank"
          {% else %}
            action="#"
            method="post"
            onsubmit="return false;"
          {% endif %}
          class="space-y-4"
        >
          <input
            type="email"
            name="email"
            placeholder="Email Address"
            class="w-full bg-transparent border-b border-skinmenu-brown/20 py-2 text-heading outline-none focus:border-skinmenu-brown transition-colors placeholder:text-fg/40"
            required
            {% if not gs.newsletter_form_action %}disabled{% endif %}
          >

          <button
            type="submit"
            class="label-display text-fg/60 hover:text-skinmenu-brown transition-colors no-underline"
            {% if not gs.newsletter_form_action %}disabled aria-disabled="true"{% endif %}
          >
            {{ gs.newsletter_button_label|default:"Subscribe" }}
          </button>

          {% if not gs.newsletter_form_action %}
            <p class="text-fg/50">
              Newsletter signup will be available shortly.
            </p>
          {% endif %}
        </form>
      </div>

    </div>

    {# Bottom bar (tighter) #}
    <div class="border-t border-border/10 pt-6 flex flex-col md:flex-row justify-between items-center gap-5">
      <div class="text-fg/40">
        &copy; {% now "Y" %} {{ gs.clinic_name|default:"SKINMENU" }}. All rights reserved.
      </div>

      <div class="flex items-center gap-8">
        <div class="flex gap-4 text-fg/40">
          <a href="/privacy/" class="hover:text-fg transition no-underline">Privacy</a>
          <a href="/terms/" class="hover:text-fg transition no-underline">Terms</a>
        </div>

        {# Keep your preferred theme toggle #}
        <button
          type="button"
          class="theme-toggle flex items-center justify-center text-fg/60 hover:text-skinmenu-brown transition-colors p-2 rounded-full border border-transparent hover:border-skinmenu-brown/10"
          aria-label="Toggle theme"
          data-theme-toggle
        >
          <div class="relative w-6 h-6">
            <svg class="theme-icon theme-icon-sun absolute inset-0 w-full h-full" viewBox="0 0 24 24" aria-hidden="true">
              <path fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"
                d="M12 3v2m0 14v2m9-9h-2M5 12H3m15.364-6.364-1.414 1.414M7.05 16.95l-1.414 1.414M18.364 18.364l-1.414-1.414M7.05 7.05 5.636 5.636M16 12a4 4 0 1 1-8 0 4 4 0 0 1 8 0Z"/>
            </svg>
            <svg class="theme-icon theme-icon-moon absolute inset-0 w-full h-full" viewBox="0 0 24 24" aria-hidden="true">
              <path fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"
                d="M21 12.8A7.2 7.2 0 1 1 11.2 3a5.6 5.6 0 0 0 9.8 9.8Z"/>
            </svg>
          </div>
        </button>
      </div>
    </div>

  </div>
</footer>
{% endwith %}
