{% load wagtailcore_tags %}

{% with gs=settings.site_settings.GlobalSiteSettings nav=settings.site_settings.NavigationSettings %}
<footer class="border-t border-border/20 bg-surface pt-20 pb-10">
  <div class="container-shell">
    
    <div class="grid gap-12 lg:grid-cols-12 mb-20">
      
      <div class="lg:col-span-4 space-y-8">
        <div>
           <div class="text-2xl font-display font-light text-heading tracking-wide mb-4">
            {{ gs.clinic_name|default:"SKINMENU" }}
          </div>
          <p class="text-base text-fg/70 leading-relaxed max-w-sm">
            Bespoke treatment plans composed with restraint, precision, and intelligence.
          </p>
        </div>

        {% if gs.address %}
          <div class="text-sm text-fg/60 whitespace-pre-line leading-relaxed font-sans">{{ gs.address }}</div>
        {% endif %}

        <div class="flex gap-6 pt-2">
            {% if gs.instagram_url %}<a href="{{ gs.instagram_url }}" class="text-fg/50 hover:text-skinmenu-brown transition" target="_blank">IG</a>{% endif %}
            {% if gs.tiktok_url %}<a href="{{ gs.tiktok_url }}" class="text-fg/50 hover:text-skinmenu-brown transition" target="_blank">TT</a>{% endif %}
            {% if gs.facebook_url %}<a href="{{ gs.facebook_url }}" class="text-fg/50 hover:text-skinmenu-brown transition" target="_blank">FB</a>{% endif %}
        </div>
      </div>

      <div class="lg:col-span-3 lg:col-start-6">
        <h3 class="text-sm font-semibold uppercase tracking-widest text-skinmenu-brown mb-6">Menu</h3>
        <nav class="flex flex-col gap-3 text-base text-fg/80">
          {% for b in nav.footer_links %}
            {% with link=b.value %}
              {% if link.page %}
                <a class="hover:text-skinmenu-brown transition-colors" href="{% pageurl link.page %}">{{ link.label }}</a>
              {% else %}
                <a class="hover:text-skinmenu-brown transition-colors" href="{{ link.url }}" {% if link.open_in_new_tab %}target="_blank" rel="noopener"{% endif %}>
                  {{ link.label }}
                </a>
              {% endif %}
            {% endwith %}
          {% empty %}
            <a class="hover:text-skinmenu-brown transition-colors" href="/contact/">Contact</a>
            <a class="hover:text-skinmenu-brown transition-colors" href="/about/">About</a>
            <a class="hover:text-skinmenu-brown transition-colors" href="/privacy/">Privacy</a>
          {% endfor %}
        </nav>
      </div>

      <div class="lg:col-span-4">
        {% if gs.newsletter_form_action %}
            <h3 class="text-sm font-semibold uppercase tracking-widest text-skinmenu-brown mb-6">
              {{ gs.newsletter_heading|default:"The Digest" }}
            </h3>
            <form action="{{ gs.newsletter_form_action }}" method="post" target="_blank" class="space-y-4">
              <input 
                type="email" 
                name="email" 
                placeholder="Email Address" 
                class="w-full bg-transparent border-b border-skinmenu-brown/30 py-3 text-lg focus:outline-none focus:border-skinmenu-brown transition-colors placeholder:text-fg/40"
                required
              >
              <button type="submit" class="text-sm font-semibold uppercase tracking-widest text-fg/60 hover:text-skinmenu-brown transition-colors">
                Subscribe
              </button>
            </form>
        {% else %}
             <h3 class="text-sm font-semibold uppercase tracking-widest text-skinmenu-brown mb-6">Enquire</h3>
             <a href="/contact/" class="text-2xl font-display font-light text-heading hover:text-skinmenu-brown transition-colors">
                Book a consultation &rarr;
             </a>
        {% endif %}
      </div>
    </div>

    <div class="border-t border-border/10 pt-8 flex flex-col md:flex-row justify-between items-center gap-6">
      
      <div class="text-xs text-fg/40 font-sans">
        &copy; {% now "Y" %} {{ gs.clinic_name|default:"SKINMENU" }}. All rights reserved.
      </div>

      <div class="flex items-center gap-8">
        <div class="flex gap-4 text-xs text-fg/40">
           <a href="/privacy/" class="hover:text-fg transition">Privacy</a>
           <a href="/terms/" class="hover:text-fg transition">Terms</a>
        </div>

        <button
          type="button"
          class="theme-toggle flex items-center justify-center text-fg/60 hover:text-skinmenu-brown transition-colors p-2 rounded-full border border-transparent hover:border-skinmenu-brown/10"
          aria-label="Toggle theme"
          data-theme-toggle
        >
          <div class="relative w-6 h-6">
            <svg class="theme-icon theme-icon-sun absolute inset-0 w-full h-full" viewBox="0 0 24 24" aria-hidden="true">
              <path fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"
                d="M12 3v2m0 14v2m9-9h-2M5 12H3m15.364-6.364-1.414 1.414M7.05 16.95l-1.414 1.414M18.364 18.364l-1.414-1.414M7.05 7.05 5.636 5.636M16 12a4 4 0 1 1-8 0 4 4 0 0 1 8 0Z"/>
            </svg>
            <svg class="theme-icon theme-icon-moon absolute inset-0 w-full h-full" viewBox="0 0 24 24" aria-hidden="true">
              <path fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"
                d="M21 12.8A7.2 7.2 0 1 1 11.2 3a5.6 5.6 0 0 0 9.8 9.8Z"/>
            </svg>
          </div>
        </button>

      </div>
    </div>

  </div>
</footer>
{% endwith %}